{"version":3,"sources":["../src/changes.js"],"names":["store","changes","options","handleChange","eventEmitter","cancel","cleanup","handleChangeQueued","on","removeListener"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,KAAK,GAAG,2BAAd;;AAEe,SAASC,OAAT,CAAiBC,OAAjB,EAA0BC,YAA1B,EAAwC;AAAA;;AAAA,eACrBH,KAAK,CAAC,CAAC,IAAD,EAAOE,OAAP,CAAD,EAAkB,YAAM;AAC3D,QAAME,YAAY,GAAG,KAAI,CAACH,OAAL,CAAaC,OAAb,CAArB;;AACA,WAAO,CACLE,YADK,EAEL,UAAAA,YAAY,EAAI;AACdA,MAAAA,YAAY,CAACC,MAAb;AACD,KAJI,CAAP;AAMD,GARoC,CADgB;AAAA;AAAA,MAC9CD,YAD8C;AAAA,MAChCE,OADgC;;AAUrD,MAAMC,kBAAkB,GAAG,2BAAaJ,YAAb,CAA3B;AACAC,EAAAA,YAAY,CAACI,EAAb,CAAgB,QAAhB,EAA0BD,kBAA1B;AACA,SAAO,SAASF,MAAT,GAAkB;AACvBD,IAAAA,YAAY,CAACK,cAAb,CAA4B,QAA5B,EAAsCF,kBAAtC;AACAD,IAAAA,OAAO;AACR,GAHD;AAID","sourcesContent":["import createStore from './utils/createStore';\nimport processQueue from './utils/processQueue';\n\nconst store = createStore();\n\nexport default function changes(options, handleChange) {\n  const [eventEmitter, cleanup] = store([this, options], () => {\n    const eventEmitter = this.changes(options);\n    return [\n      eventEmitter,\n      eventEmitter => {\n        eventEmitter.cancel();\n      }\n    ];\n  });\n  const handleChangeQueued = processQueue(handleChange);\n  eventEmitter.on('change', handleChangeQueued);\n  return function cancel() {\n    eventEmitter.removeListener('change', handleChangeQueued);\n    cleanup();\n  };\n}\n"],"file":"changes.js"}